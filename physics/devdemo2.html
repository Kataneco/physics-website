<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="icon" href="/assets/media/favicon.png">
        <link rel="stylesheet" href="/assets/styles/default.css">
        <link rel="stylesheet" href="/assets/styles/sandbox.css">
        <script src="/simple-sandbox/simple-sandbox.js"></script>
        <script>
            const dtmilli = 12;
            const dt = dtmilli / 1000;
            function main() {
                let sandbox = createSandbox(document.getElementById("dev"));
                let ball = sandbox.createObject(sphereRenderer(32, ), sphereCollider(32), physics(1, 0));
                let anchor = sandbox.createObject(sphereRenderer(8, "yellow"), {}, {});
                ball.transform.position = vec(-90, 10);
                sandbox.update();

                setInterval(function() {
                    ball.physics.acceleration = polar(0,0)
                    let distxy = subVec(anchor.transform.position, ball.transform.position);
                    let dist = Math.sqrt(distxy.x*distxy.x+distxy.y*distxy.y);
                    let dir = vec(distxy.x/dist, distxy.y/dist);
                    let polarDir = cartesianToPolar(dir);
                    polarDir.magnitude = 12
                    ball.physics.applyForce(polar(10, Math.PI*1.5));
                    ball.physics.applyForce(polarDir);
                    //console.log(polarDir)
                    ball.physics.compute(dt, ball.transform);
                    sandbox.update();
                    sandbox.drawLine(ball.transform.position, anchor.transform.position, 5, "yellow");
                    let line = polarDir.cartesian()
                    sandbox.drawLine(ball.transform.position, line, 5, "green");
                    console.log(line)
                    sandbox.drawLine(ball.transform.position, ball.physics.velocity.cartesian())
                    sandbox.drawLine(ball.transform.position, ball.physics.acceleration.cartesian(), 7, "red")
                }, dtmilli);
            }
        </script>
    </head>
    <body onload="main()">
        <h1>DOLOR SIT AMET</h1>
        <div class="sandbox_container">
            <canvas id="dev" name="dev" class="sandbox_surface" width="1280px" height="720px"></canvas>
            <div class="sandbox_overlay">
            </div>
        </div>
    </body>
    <hidden>
        <img id="devimg" src="/assets/media/favicon.png">
    </hidden>
</html>
